
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript array_unique function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript array_unique function A JavaScript equivalent of PHP&#8217;s array_unique array/array_unique.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/array_unique/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">php</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">.js</a></h1>
  
    <h2>A resource of php functions in JavaScript</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
  <li><a target="_blank" href="https://github.com/kvz/phpjs/wiki/_pages">Wiki</a></li>
  <li><a target="_blank"  href="http://twitter.com/phpjs">@phpjs</a></li>
  <li><a target="_blank"  href="http://identi.ca/brettz9">@brettz9</a></li>
  <li><a target="_blank"  href="http://twitter.com/kvz">@kvz</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript array_unique function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s array_unique</p>

<figure class='code'><figcaption><span>array/array_unique.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/array/array_unique.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">array_unique</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: Carlos R. L. Rodrigues (http://www.jsfromhell.com)</span>
</span><span class='line'>  <span class="c1">// +      input by: duncan</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Nate</span>
</span><span class='line'>  <span class="c1">// +      input by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Michael Grier</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// %          note 1: The second argument, sort_flags is not implemented;</span>
</span><span class='line'>  <span class="c1">// %          note 1: also should be sorted (asort?) first according to docs</span>
</span><span class='line'>  <span class="c1">// *     example 1: array_unique([&#39;Kevin&#39;,&#39;Kevin&#39;,&#39;van&#39;,&#39;Zonneveld&#39;,&#39;Kevin&#39;]);</span>
</span><span class='line'>  <span class="c1">// *     returns 1: {0: &#39;Kevin&#39;, 2: &#39;van&#39;, 3: &#39;Zonneveld&#39;}</span>
</span><span class='line'>  <span class="c1">// *     example 2: array_unique({&#39;a&#39;: &#39;green&#39;, 0: &#39;red&#39;, &#39;b&#39;: &#39;green&#39;, 1: &#39;blue&#39;, 2: &#39;red&#39;});</span>
</span><span class='line'>  <span class="c1">// *     returns 2: {a: &#39;green&#39;, 0: &#39;red&#39;, 1: &#39;blue&#39;}</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">tmp_arr2</span> <span class="o">=</span> <span class="p">{},</span>
</span><span class='line'>    <span class="nx">val</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">__array_search</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">needle</span><span class="p">,</span> <span class="nx">haystack</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">fkey</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="nx">fkey</span> <span class="k">in</span> <span class="nx">haystack</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">haystack</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">fkey</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">((</span><span class="nx">haystack</span><span class="p">[</span><span class="nx">fkey</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="p">(</span><span class="nx">needle</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">fkey</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">inputArr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">val</span> <span class="o">=</span> <span class="nx">inputArr</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="kc">false</span> <span class="o">===</span> <span class="nx">__array_search</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">tmp_arr2</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">tmp_arr2</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">tmp_arr2</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/array/array_unique.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/array/array_unique.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">array_unique</span><span class="p">([</span><span class="s1">&#39;Kevin&#39;</span><span class="p">,</span><span class="s1">&#39;Kevin&#39;</span><span class="p">,</span><span class="s1">&#39;van&#39;</span><span class="p">,</span><span class="s1">&#39;Zonneveld&#39;</span><span class="p">,</span><span class="s1">&#39;Kevin&#39;</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span><span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;Kevin&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span> <span class="s1">&#39;van&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="o">:</span> <span class="s1">&#39;Zonneveld&#39;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">array_unique</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="o">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="o">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the array extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/array">array</a></li>
<li><a href="/functions/array_change_key_case">array_change_key_case</a></li>
<li><a href="/functions/array_chunk">array_chunk</a></li>
<li><a href="/functions/array_combine">array_combine</a></li>
<li><a href="/functions/array_count_values">array_count_values</a></li>
<li><a href="/functions/array_diff">array_diff</a></li>
<li><a href="/functions/array_diff_assoc">array_diff_assoc</a></li>
<li><a href="/functions/array_diff_key">array_diff_key</a></li>
<li><a href="/functions/array_diff_uassoc">array_diff_uassoc</a></li>
<li><a href="/functions/array_diff_ukey">array_diff_ukey</a></li>
<li><a href="/functions/array_fill">array_fill</a></li>
<li><a href="/functions/array_fill_keys">array_fill_keys</a></li>
<li><a href="/functions/array_filter">array_filter</a></li>
<li><a href="/functions/array_flip">array_flip</a></li>
<li><a href="/functions/array_intersect">array_intersect</a></li>
<li><a href="/functions/array_intersect_assoc">array_intersect_assoc</a></li>
<li><a href="/functions/array_intersect_key">array_intersect_key</a></li>
<li><a href="/functions/array_intersect_uassoc">array_intersect_uassoc</a></li>
<li><a href="/functions/array_intersect_ukey">array_intersect_ukey</a></li>
<li><a href="/functions/array_key_exists">array_key_exists</a></li>
<li><a href="/functions/array_keys">array_keys</a></li>
<li><a href="/functions/array_map">array_map</a></li>
<li><a href="/functions/array_merge">array_merge</a></li>
<li><a href="/functions/array_merge_recursive">array_merge_recursive</a></li>
<li><a href="/functions/array_multisort">array_multisort</a></li>
<li><a href="/functions/array_pad">array_pad</a></li>
<li><a href="/functions/array_pop">array_pop</a></li>
<li><a href="/functions/array_product">array_product</a></li>
<li><a href="/functions/array_push">array_push</a></li>
<li><a href="/functions/array_rand">array_rand</a></li>
<li><a href="/functions/array_reduce">array_reduce</a></li>
<li><a href="/functions/array_replace">array_replace</a></li>
<li><a href="/functions/array_replace_recursive">array_replace_recursive</a></li>
<li><a href="/functions/array_reverse">array_reverse</a></li>
<li><a href="/functions/array_search">array_search</a></li>
<li><a href="/functions/array_shift">array_shift</a></li>
<li><a href="/functions/array_slice">array_slice</a></li>
<li><a href="/functions/array_splice">array_splice</a></li>
<li><a href="/functions/array_sum">array_sum</a></li>
<li><a href="/functions/array_udiff">array_udiff</a></li>
<li><a href="/functions/array_udiff_assoc">array_udiff_assoc</a></li>
<li><a href="/functions/array_udiff_uassoc">array_udiff_uassoc</a></li>
<li><a href="/functions/array_uintersect">array_uintersect</a></li>
<li><a href="/functions/array_uintersect_assoc">array_uintersect_assoc</a></li>
<li><a href="/functions/array_uintersect_uassoc">array_uintersect_uassoc</a></li>
<li><a href="/functions/array_unique">array_unique</a></li>
<li><a href="/functions/array_unshift">array_unshift</a></li>
<li><a href="/functions/array_values">array_values</a></li>
<li><a href="/functions/array_walk">array_walk</a></li>
<li><a href="/functions/array_walk_recursive">array_walk_recursive</a></li>
<li><a href="/functions/arsort">arsort</a></li>
<li><a href="/functions/asort">asort</a></li>
<li><a href="/functions/compact">compact</a></li>
<li><a href="/functions/count">count</a></li>
<li><a href="/functions/current">current</a></li>
<li><a href="/functions/each">each</a></li>
<li><a href="/functions/end">end</a></li>
<li><a href="/functions/extract">extract</a></li>
<li><a href="/functions/in_array">in_array</a></li>
<li><a href="/functions/key">key</a></li>
<li><a href="/functions/krsort">krsort</a></li>
<li><a href="/functions/ksort">ksort</a></li>
<li><a href="/functions/natcasesort">natcasesort</a></li>
<li><a href="/functions/natsort">natsort</a></li>
<li><a href="/functions/next">next</a></li>
<li><a href="/functions/pos">pos</a></li>
<li><a href="/functions/prev">prev</a></li>
<li><a href="/functions/range">range</a></li>
<li><a href="/functions/reset">reset</a></li>
<li><a href="/functions/rsort">rsort</a></li>
<li><a href="/functions/shuffle">shuffle</a></li>
<li><a href="/functions/sizeof">sizeof</a></li>
<li><a href="/functions/sort">sort</a></li>
<li><a href="/functions/uasort">uasort</a></li>
<li><a href="/functions/uksort">uksort</a></li>
<li><a href="/functions/usort">usort</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
Dj
</strong>
on 2011-12-27 02:12:16 <br />
I suggest you my version which has two main features compared with your version:
First, its speed; Instead of use array_search which needs to iterate over the collection for each item of the source value, I add the new values as keys (implicity converted to strings for comparision) to a temporary object, then quickly you can check if it was added using hasOwnProperty.
Second, a second paramemeter which add the feature of returning the result as array when the source value is an array.
Note that in this case the array will be re-indexed because in js the keys of the arrays are numeric and needs to be continued.
<pre><code>
function array_unique(inputArr, preserveArray) {
    var key = '',
        val = '',
        hashT = {},
        result;

    if (preserveArray &amp;&amp; (inputArr instanceof Array)) {
        result = [];
        var length = inputArr &amp;&amp; inputArr.length &gt;&gt; 0;
        
        for (key = 0; key &lt; length; ++key) {
            val = inputArr[key];
            if (!hashT.hasOwnProperty(val)) {
                result.push(val);
                hashT[val] = true;
            }
        }
        
    } else {
        result = {};
        if (!inputArr) {
            return result;
        }
        for (key in inputArr) {
            val = inputArr[key];
            if (!hashT.hasOwnProperty(val)) {
                result[key] = val;
                hashT[val] = true;
            }
        }
    }
    return result;
}
</code></pre>
<hr />


<strong>

</strong>
on 2010-06-09 21:10:58 <br />
@t: Associative arrays aren&#8217;t native to JavaScript, but JavaScript objects share similarities to PHP associative arrays, so to try and support associative arrays, the functions on PHP.JS convert JavaScript arrays to JavaScript objects.
<hr />


<strong>
t
</strong>
on 2010-06-08 19:50:09 <br />
Why does this function return an object where as the php version returns an array?

Thanks
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-03-19 14:55:36 <br />
But to make clear, it wasn&#8217;t the position that was the problem, but the lack of an argument&#8230;Dumb oversight on my part&#8230;
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-03-19 14:53:14 <br />
@harald: Sorry, fixed in git: http://github.com/kvz/phpjs/raw/master/functions/array/array_unique.js . See https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/hasOwnProperty for an explanation of the method. It is used to make sure we are only iterating over the immediate properties of the object, and not any that may have been added on an inherited class or on the Object/Array prototype itself&#8230;
<hr />


<strong>
harald
</strong>
on 2010-03-19 12:36:02 <br />
hello,

may i ask:

lines 25 and 35

why are you testing for hasOwnProperty inside the loop and not outside?

<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-02-04 02:17:15 <br />
@nitin gupta: Thanks&#8211;I&#8217;ve fixed it in Git. I think it is a relic of the fact that we noticed that we may still _need_ to sort according to the docs, but I&#8217;m a bit busy to look at fixing this now myself.
<hr />


<strong>
<a href="http://publicmind.in/blog" rel="nofollow">nitin gupta</a>
</strong>
on 2010-02-02 12:43:44 <br />
Hi Kevin,

I do not see this function being dependent on asort, may be a little documentation error.

Regards,
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-04-14 12:41:42 <br />
Great work guys, I&#8217;ll deploy shortly
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-04-14 03:23:36 <br />
Ok, I made the strict fix, Michael, in SVN, thank you! 

However, I&#8217;m not sure about the array-to-objects issue. Although we can get an array to return, due to the nature of JS, it will only contain the numerically indexed items within the array (and the length will be the total of those only). The other items would be added as properties of that array&#8217;s object, and not be counted with length, though they are iteratable. Kevin has chosen to implement PHP arrays as regular (non-array) objects, so that we can support associative arrays. Granted we could theoretically return arrays with object properties, but that might be more confusing, and perhaps is the reason he chose not to do that. 

One solution, might be to detect whether the input array was indeed a genuine array (which could only be numerically indexed), and if so, build a bona fide array as output too, but the problem with that is that the PHP behavior is to preserve keys, and we cannot preserve keys unless we build an object (or delete/cause to be undefined, those items which are no longer in use, but that still keeps the array length)&#8211;the one rare exception where we could safely return a regular array would be if all of the unique items were at the front of the array&#8230; So, not any good answers, I suspect, though I imagine you personally should be able to adapt the output of our function to the form you need for Greasemonkey&#8230; Best wishes, Brett
<hr />


<strong>
Michael Grier
</strong>
on 2009-04-13 19:03:58 <br />
I found out if you&#8217;re using this in GreaseMonkey, objects won&#8217;t return. I changed the tmp_arr declarations to array, and it started working for me.

Also, regarding the strict var, PHP always does a strict comparison after casting the arguments to strings. So you could do the following:

<pre><code>
if ((haystack[fkey] + &quot;&quot;) === (needle + &quot;&quot;)) {
    return fkey;
}
</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-11-09 13:03:39 <br />
@ Nate: Thank you for noticing!
<hr />


<strong>
Nate
</strong>
on 2008-11-06 15:46:01 <br />
It looks like someone forgot to declare &amp;quot;val&amp;quot; with var.

I think the first line of code should read:

<pre><code>
    var key = '', tmp_arr1 = {}, tmp_arr2 = {}, val;
</code></pre>

Otherwise, &amp;quot;val&amp;quot; is a global variable, I believe.

Is there any benefit to using var in a for loop?  Would it be better to also declare &amp;quot;fkey&amp;quot; with &amp;quot;strict&amp;quot;?

Also, I don&#8217;t know if this is important, but there is no space between &amp;quot;for&amp;quot; and &amp;quot;if&amp;quot; and the opening parentheses in __array_search().
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-08-27 17:01:44 <br />
@ Nosredna: That&#8217;s an idea that calls for a function rewrite. Interested? ;)
<hr />


<strong>
Nosredna
</strong>
on 2008-08-05 00:23:36 <br />
Stray thought. The nested loops make me wonder how slow this is for large arrays.

Perhaps you could clone the array, sort the clone, then walk the two arrays deleting the dupes as you go. Sort is probably O(n log n) and maybe it&#8217;s especially fast when no user sort evaluation routine is passed in.
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-07-25 08:47:53 <br />
@ sankai: Thank you so much! But this array_unique does not support associative arrays (javascript objects). So unlike PHP&#8217;s implementation, arrays that have non-numeric keys do not work.

Sad to say that my implementation didn&#8217;t support it either, but I&#8217;m looking to replace array_unique with one that does support:
<pre><code>
{firstname: 'Kevin', surname: 'van Zonneveld'}
</code></pre>
.. style arrays
<hr />


<strong>
sankai
</strong>
on 2008-07-25 08:21:01 <br />
the code I posted yesterday had big bug!I fixed it as the following:
<pre><code>
function array_unique(array,numeric){
    // http://blog.doublekai.org/
    // +   original by: sankai (http://blog.doublekai.org/)
    // *     example 1: array_unique([1,2,3,'1','2','3',1,2,3],true);
    // *     returns 1: [1,2,3]
    // *     example 2: array_unique([1,2,3,'1','2','3',1,2,3]);
    // *     returns 2: [1,2,3,'1','2','3']
    // *     example 3: array_unique([1,'a','a','1','3',3,'b','c','b',1]);
    // *     returns 3: [1,'a','1','3',3,'b','c']
    // *     example 3: array_unique([1,'a','a','1','3',3,'b','c','b',1],true);
    // *     returns 3: [1,'a',3,'b','c']    
    // *     NOTE :require function in_array()    
    var tem_arr = new Array();
    for(i=0;i&amp;lt;array.length;i++){
        if(numeric === true &amp;amp;&amp;amp; typeof(array[i]) == 'string' &amp;amp;&amp;amp; !isNaN(array[i])){ 
            array[i]=parseInt(array[i],10);
        }
        if(!in_array(array[i],tem_arr)){
                tem_arr[i]=array[i];
        }
    }
    return tem_arr.join(' ').replace(/\s{2,}/g,' ').split(' ');
}
</code></pre>
The version need require function in_array

<pre><code>
function array_unique(array,numeric){
    // http://blog.doublekai.org/
    // +   original by: sankai (http://blog.doublekai.org/)
    // *     example 1: array_unique([1,2,3,'1','2','3',1,2,3],true);
    // *     returns 1: [1,2,3]
    // *     example 2: array_unique([1,2,3,'1','2','3',1,2,3]);
    // *     returns 2: [1,2,3,'1','2','3']
    // *     example 3: array_unique([1,'a','a','1','3',3,'b','c','b',1]);
    // *     returns 3: [1,'a','1','3',3,'b','c']
    // *     example 3: array_unique([1,'a','a','1','3',3,'b','c','b',1],true);
    // *     returns 3: [1,'a',3,'b','c']    
    // *     DON'T NEED require function in_array()    
    var tem_arr = new Array();
    for(i=0;i&amp;lt;array.length;i++){
        if(numeric === true &amp;amp;&amp;amp; typeof(array[i]) == 'string' &amp;amp;&amp;amp; !isNaN(array[i])){ 
            array[i]=parseInt(array[i],10);
        }    
        if(tem_arr.length == 0){
            tem_arr[i] = array[i];
        } else {
            var exist = false;
            for(var j=0; j&amp;lt;tem_arr.length; j++){
                if(tem_arr[j] === array[i]){
                    exist = true;
                }
            }
            if(!exist){
                if(array[i] != null){
                    tem_arr[i] = array[i];
                }    
            }
        }
    }
    return tem_arr.join(' ').replace(/\s{2,}/g,' ').split(' ');
}
</code></pre>
The version don&#8217;t need require funciton in_array()
<hr />


<strong>
sankai
</strong>
on 2008-07-24 10:05:47 <br />
Hi,I try to write a code for array_unique() as the following:
<pre><code>
function array_unique(array){
    var tem_arr = new Array();
    for(i=0;i&amp;lt;array.length;i++){
        if(!in_array(array[i],tem_arr)){
            tem_arr[i]=array[i];
        }
    }
    return tem_arr.join(',').split(',');
}
</code></pre>
NOTE:It&#8217;s require function in_array()
<hr />


<strong>
sankai
</strong>
on 2008-07-24 09:47:36 <br />
Running:
<pre><code>
array_unique(['Kevin','Kevin','van','Kevin']);
</code></pre>
Return:
<pre><code>
['Kevin','van','Kevin']
</code></pre>
It&#8217;s the same problem as @goshki ?
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-06-16 00:16:50 <br />
@ goshki: You&#8217;re right, it seems that our current version doesn&#8217;t support associative arrays (javascript objects). Since PHP doesn&#8217;t distinct those, we need to work on a version that does support objects. It&#8217;s on my todo list. Thank your for noticing!
<hr />


<strong>
goshki
</strong>
on 2008-06-13 19:45:26 <br />
Well, there seems to be some kind of a problem with this function. Running:

<pre><code>
array_unique(['a','b','c','a','b','c','a','b','c']);
</code></pre>

returns:

<pre><code>
['a','a','b','c']
</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-05-02 11:34:44 <br />
@ duncan: You were not being stupid, we were. Thank you for noticing! The fixed version will be visible shortly.
<hr />


<strong>
duncan
</strong>
on 2008-04-30 12:27:53 <br />
maybe i&#8217;m being stupid, but PHP array_unique returns an array, not a boolean.
&amp;quot;Takes an input array  and returns a new array without duplicate values.&amp;quot;
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/array_unique/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/array_unique/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/array_unique/index.html';
        var disqus_url = 'http://phpjs.org/functions/array_unique/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
