
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript file_exists function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript file_exists function A JavaScript equivalent of PHP&#8217;s file_exists filesystem/file_exists.js raw on github 1
2
3
4
5
6
7
8
9
10
11 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/file_exists/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">php</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">.js</a></h1>
  
    <h2>A resource of php functions in JavaScript</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
  <li><a target="_blank" href="https://github.com/kvz/phpjs/wiki/_pages">Wiki</a></li>
  <li><a target="_blank"  href="http://twitter.com/phpjs">@phpjs</a></li>
  <li><a target="_blank"  href="http://identi.ca/brettz9">@brettz9</a></li>
  <li><a target="_blank"  href="http://twitter.com/kvz">@kvz</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript file_exists function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s file_exists</p>

<figure class='code'><figcaption><span>filesystem/file_exists.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/filesystem/file_exists.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">file_exists</span> <span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: Enrique Gonzalez</span>
</span><span class='line'>  <span class="c1">// +      input by: Jani Hartikainen</span>
</span><span class='line'>  <span class="c1">// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// %        note 1: This function uses XmlHttpRequest and cannot retrieve resource from different domain.</span>
</span><span class='line'>  <span class="c1">// %        note 1: Synchronous so may lock up browser, mainly here for study purposes.</span>
</span><span class='line'>  <span class="c1">// *     example 1: file_exists(&#39;http://kevin.vanzonneveld.net/pj_test_supportfile_1.htm&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 1: &#39;123&#39;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">&quot;Microsoft.XMLHTTP&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;XMLHttpRequest not supported&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// HEAD Results are usually shorter (faster) than GET</span>
</span><span class='line'>  <span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;HEAD&#39;</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">req</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/filesystem/file_exists.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/filesystem/file_exists.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">file_exists</span><span class="p">(</span><span class="s1">&#39;http://kevin.vanzonneveld.net/pj_test_supportfile_1.htm&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;123&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the filesystem extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/basename">basename</a></li>
<li><a href="/functions/dirname">dirname</a></li>
<li><a href="/functions/fclose">fclose</a></li>
<li><a href="/functions/feof">feof</a></li>
<li><a href="/functions/fgetc">fgetc</a></li>
<li><a href="/functions/fgetcsv">fgetcsv</a></li>
<li><a href="/functions/fgets">fgets</a></li>
<li><a href="/functions/fgetss">fgetss</a></li>
<li><a href="/functions/file">file</a></li>
<li><a href="/functions/file_exists">file_exists</a></li>
<li><a href="/functions/file_get_contents">file_get_contents</a></li>
<li><a href="/functions/filemtime">filemtime</a></li>
<li><a href="/functions/filesize">filesize</a></li>
<li><a href="/functions/fopen">fopen</a></li>
<li><a href="/functions/fpassthru">fpassthru</a></li>
<li><a href="/functions/fread">fread</a></li>
<li><a href="/functions/fscanf">fscanf</a></li>
<li><a href="/functions/fseek">fseek</a></li>
<li><a href="/functions/ftell">ftell</a></li>
<li><a href="/functions/pathinfo">pathinfo</a></li>
<li><a href="/functions/pclose">pclose</a></li>
<li><a href="/functions/popen">popen</a></li>
<li><a href="/functions/readfile">readfile</a></li>
<li><a href="/functions/realpath">realpath</a></li>
<li><a href="/functions/rewind">rewind</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-01-06 10:24:35 <br />
To add clarification to my last post regarding your point, using PHP as a proxy will add EXTRA time if you have an Ajax-based application. And even regarding PHP&#8217;s extra features, HTML5 apps nowadays are doing more of the things you can do on the server (there may even be a standard way to run a proxy on the client-side in the future, with user permission, letting you build your own browser in HTML5).
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-01-06 09:46:43 <br />
Hello Ali.MD,

There are indeed client-side uses for checking the existence of a file (though probably adapting this function to accept an asynchronous callback). For example, particularly if your application is interacting with other sites&#8212;such as allowing the user to access an API with JSONP or HTML5 cross-domain access (as I was developing in making a site-independent Mediawiki browser client), one might wish to know whether a certain file exists (e.g., to decide the coloring of a link to a wiki page).

The synchronous part of the function is the real problem here, and there is already a disclaimer in the function&#8217;s notes about the function being for study purposes.
<hr />


<strong>
<a href="ali.md" rel="nofollow">Ali.MD</a>
</strong>
on 2012-01-06 05:32:30 <br />
its wrong .
you load content of file to check its exist ?!?!
it can very slow in big files, even in &#8216;HEAD&#8217; method. (except in nginx servers)
why you don&#8217;t write an optional php server site script too boost performance and full php feature ?
<hr />


<strong>
Felipe
</strong>
on 2011-12-21 20:36:00 <br />
Funny
<hr />


<strong>
<a href="http://www.sk80.co.uk" rel="nofollow">James &#8216;Skateside&#8217; Long</a>
</strong>
on 2010-05-22 04:00:21 <br />
Blast! Sorry for the double-post but I&#8217;ve just realise that regular expression should only check the beginning of the string so it should be:
/^https?:\/\//i
<hr />


<strong>
<a href="http://www.sk80.co.uk" rel="nofollow">James &#8216;Skateside&#8217; Long</a>
</strong>
on 2010-05-22 03:56:19 <br />
Hi guys

This is my first contribution to php.js, but I feel that it&#8217;s an important one.

Firstly, Wikipedia (http://en.wikipedia.org/wiki/Xmlhttprequest) assures us that there are a few more ActiveXObject parameters that can be tried to allow older versions of MSIE to use this function. This can be easily fixed by replacing the ternary opperator on line 14 with a self-executing function to try as many things as possible.

Secondly, checking an absolute URL offline in Firefox throws an NS_ERROR_FAILURE error. I think the best solution to this is to check whether the file location is an absolute reference and whether or not the script is being run online. If the reference is absolute but the script is being run offline, just assume the file exists.

Finally, any status returned that&#8217;s between 200 and 300 is technically a sucessfull response.

So, with all these in mind, I&#8217;d like to propose the following function as the new file_exists(). Please note that I&#8217;ve tweaked this so that it only returns true or false so I can use it in my own scripts - feel free to add your own error handling to the function.

<pre><code>
function file_exists(url) {

    // Fire up the AJAX function
    var req = (function() {
        if (typeof XMLHttpRequest == &quot;function&quot;) {
            return new XMLHttpRequest();
        } else {
            XMLHttpRequest = function () {
                try {return new ActiveXObject(&quot;Msxml2.XMLHTTP.6.0&quot;);}catch(e){};
                try {return new ActiveXObject(&quot;Msxml2.XMLHTTP.3.0&quot;);}catch(e){};
                try {return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);}catch(e){};
                return false;
            };
        }
    }());

    // If we can't use AJAX, or we're offline, we'll have to assume that the image is fine until proved otherwise
    if (!req || (url.match(/https?:\/\//i) &amp;&amp; !window.location.href.match(/https?:\/\//i))) {return true;}

    // Send a 'HEAD' request since it's faster than 'GET' and 'POST'
    req.open('HEAD', url, false);
    req.send(null);

    // Any status in the 200 range is a successful request
    return (req.status &gt;= 200 &amp;&amp; req.status &lt; 300);
}
</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-11-18 12:25:44 <br />
@ frame: This could happen if you are writing multiple comments at the same time, cause only one allowed security key is remembered per user. Could this be your case as well?
<hr />


<strong>
frame
</strong>
on 2008-11-18 01:36:29 <br />
Do you have updated the link? I downloaded the lib some time before and the function was not included..  now it is o.O 

Another Bug?: The security code i typed in was not valid.. for 3 times.. and also did not reload to another code.. always the same..
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-11-14 21:21:45 <br />
@ frame: But it is, what link are you using?
<hr />


<strong>
frame
</strong>
on 2008-11-14 21:07:50 <br />
The function file_exists isn&#8217;t avaiable in php.js.
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/file_exists/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/file_exists/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/file_exists/index.html';
        var disqus_url = 'http://phpjs.org/functions/file_exists/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
