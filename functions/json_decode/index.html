
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript json_decode function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript json_decode function A JavaScript equivalent of PHP&#8217;s json_decode json/json_decode.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12
13 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/json_decode/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">php</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">.js</a></h1>
  
    <h2>A resource of php functions in JavaScript</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
  <li><a target="_blank" href="https://github.com/kvz/phpjs/wiki/_pages">Wiki</a></li>
  <li><a target="_blank"  href="http://twitter.com/phpjs">@phpjs</a></li>
  <li><a target="_blank"  href="http://identi.ca/brettz9">@brettz9</a></li>
  <li><a target="_blank"  href="http://twitter.com/kvz">@kvz</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript json_decode function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s json_decode</p>

<figure class='code'><figcaption><span>json/json_decode.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/json/json_decode.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">json_decode</span> <span class="p">(</span><span class="nx">str_json</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +      original by: Public Domain (http://www.json.org/json2.js)</span>
</span><span class='line'>  <span class="c1">// + reimplemented by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +      improved by: T.J. Leahy</span>
</span><span class='line'>  <span class="c1">// +      improved by: Michael White</span>
</span><span class='line'>  <span class="c1">// *        example 1: json_decode(&#39;[\n    &quot;e&quot;,\n    {\n    &quot;pluribus&quot;: &quot;unum&quot;\n}\n]&#39;);</span>
</span><span class='line'>  <span class="c1">// *        returns 1: [&#39;e&#39;, {pluribus: &#39;unum&#39;}]</span>
</span><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm">    http://www.JSON.org/json2.js</span>
</span><span class='line'><span class="cm">    2008-11-19</span>
</span><span class='line'><span class="cm">    Public Domain.</span>
</span><span class='line'><span class="cm">    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.</span>
</span><span class='line'><span class="cm">    See http://www.JSON.org/js.html</span>
</span><span class='line'><span class="cm">  */</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">json</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">json</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">json</span><span class="p">.</span><span class="nx">parse</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">json</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">str_json</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">err</span> <span class="k">instanceof</span> <span class="nx">SyntaxError</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Unexpected error type in json_decode()&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">last_error_json</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// usable by json_last_error()</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="sr">/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">j</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">str_json</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Parsing happens in four stages. In the first stage, we replace certain</span>
</span><span class='line'>  <span class="c1">// Unicode characters with escape sequences. JavaScript handles many characters</span>
</span><span class='line'>  <span class="c1">// incorrectly, either silently deleting them, or treating them as line endings.</span>
</span><span class='line'>  <span class="nx">cx</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">cx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">text</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="s1">&#39;\\u&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;0000&#39;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)).</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// In the second stage, we run the text against regular expressions that look</span>
</span><span class='line'>  <span class="c1">// for non-JSON patterns. We are especially concerned with &#39;()&#39; and &#39;new&#39;</span>
</span><span class='line'>  <span class="c1">// because they can cause invocation, and &#39;=&#39; because it can cause mutation.</span>
</span><span class='line'>  <span class="c1">// But just to be safe, we want to reject all unexpected forms.</span>
</span><span class='line'>  <span class="c1">// We split the second stage into 4 regexp operations in order to work around</span>
</span><span class='line'>  <span class="c1">// crippling inefficiencies in IE&#39;s and Safari&#39;s regexp engines. First we</span>
</span><span class='line'>  <span class="c1">// replace the JSON backslash pairs with &#39;@&#39; (a non-JSON character). Second, we</span>
</span><span class='line'>  <span class="c1">// replace all simple value tokens with &#39;]&#39; characters. Third, we delete all</span>
</span><span class='line'>  <span class="c1">// open brackets that follow a colon or comma or that begin the text. Finally,</span>
</span><span class='line'>  <span class="c1">// we look to see that the remaining characters are only whitespace or &#39;]&#39; or</span>
</span><span class='line'>  <span class="c1">// &#39;,&#39; or &#39;:&#39; or &#39;{&#39; or &#39;}&#39;. If that is so, then the text is safe for eval.</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">((</span><span class="sr">/^[\],:{}\s]*$/</span><span class="p">).</span>
</span><span class='line'>  <span class="nx">test</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g</span><span class="p">,</span> <span class="s1">&#39;@&#39;</span><span class="p">).</span>
</span><span class='line'>  <span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g</span><span class="p">,</span> <span class="s1">&#39;]&#39;</span><span class="p">).</span>
</span><span class='line'>  <span class="nx">replace</span><span class="p">(</span><span class="sr">/(?:^|:|,)(?:\s*\[)+/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)))</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// In the third stage we use the eval function to compile the text into a</span>
</span><span class='line'>    <span class="c1">// JavaScript structure. The &#39;{&#39; operator is subject to a syntactic ambiguity</span>
</span><span class='line'>    <span class="c1">// in JavaScript: it can begin a block or an object literal. We wrap the text</span>
</span><span class='line'>    <span class="c1">// in parens to eliminate the ambiguity.</span>
</span><span class='line'>    <span class="nx">j</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">text</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">j</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">last_error_json</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// usable by json_last_error()</span>
</span><span class='line'>  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/json/json_decode.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/json/json_decode.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">json_decode</span><span class="p">(</span><span class="s1">&#39;[\n    &quot;e&quot;,\n    {\n    &quot;pluribus&quot;: &quot;unum&quot;\n}\n]&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">pluribus</span><span class="o">:</span> <span class="s1">&#39;unum&#39;</span><span class="p">}]</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the json extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/json_decode">json_decode</a></li>
<li><a href="/functions/json_encode">json_encode</a></li>
<li><a href="/functions/json_last_error">json_last_error</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-04-06 02:47:13 <br />
@Pavel: Ok, good point, but it still suffers from the ability to set globals. So while it may be a little safer, it still doesn&#8217;t solve the root problem of complete encapsulation, though if the regex are working, eval() will be equally safe. I suggest this be refactored to use a real parser if we&#8217;re going to do anything about it.
<hr />


<strong>
Pavel Kukov
</strong>
on 2012-04-05 20:30:28 <br />
 •eval() evaluates a string as a JavaScript expression within the current execution scope and can affect local variables.
 •new Function() parses the JavaScript code stored in a string into a function object, which can then be called. It cannot affect local variables because the code runs in a separate scope.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-04-05 02:40:47 <br />
@Pavel: 
1) Function() suffers from the same problem as eval(). So does the first argument to setTimeout or setInterval when set to a string.
2) The function comments mention that the regular expressions are already ensuring that the characters in the expression are safe for evaluation. We could use a genuine parser, as I believe exist at json.org , but I&#8217;m not sure that there is anything wrong as long as the regex we are using is fail-safe (except that a real parser should be able to give better reporting of errors).
<hr />


<strong>
Pavel Kukov
</strong>
on 2012-04-04 16:16:04 <br />
On line: #68: eval is evil fix
<pre><code>
j=new Function('return '+text); return j();
</code></pre>
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2011-06-05 18:16:58 <br />
@Miguel: Could you offer your code or a snippet thereof by any chance? I really understood our namespaced version was including this.window, and that in the non-namespaced version, window.window (this.window) was recursively self-referential.
<hr />


<strong>
<a href="it4fox.com" rel="nofollow">Miguel Espinoza</a>
</strong>
on 2011-06-05 04:02:27 <br />
I ran into a situation today with Firefox 3.6.17 (didnt test with other browsers) and Firebug 1.7.1 where &quot;this.window&quot; was not recognized, it came from a pseudo pop up (div), I fixed this by editing line 20 from:
<pre><code>
var json = this.window.JSON;
</code></pre>
to:
<pre><code>
var json = (typeof this.window != 'undefined' ? this.window.JSON : undefined);
</code></pre>
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-12-15 15:16:38 <br />
@Anes: First make sure you don&#8217;t have line breaks when you make the string. When I tried pasting your string now, it was broken into separate lines which will not work in JS. If that is fixed, then you can just use it like this:
<pre><code>
var obj = json_decode('{&quot;user&quot;:&quot;test&quot;}');
alert(obj.user); // 'test'
<pre><code>
<hr />


<strong>
Anes
</strong>
on 2010-12-15 10:46:19 <br />
Hi pals ,
I am really stuck in parsing a JSON string and take it's values. I got the json string as 
{&quot;user&quot;:{&quot;id&quot;:&quot;1&quot;,&quot;firstname&quot;:&quot;Freelogin&quot;,&quot;created&quot;:&quot;0000-00-00
00:00:00&quot;,&quot;lastname&quot;:&quot;Administrator&quot;,&quot;email&quot;:&quot;fred@websecurify.com&quot;,
&quot;usergroup_id&quot;:&quot;1&quot;,&quot;status&quot;:&quot;1&quot;,&quot;ip_enable&quot;:&quot;N&quot;,&quot;priv&quot;:&quot;0&quot;,&quot;expire&quot;:&quot;&quot;},&quot;data&quot;:{
&quot;1&quot;:{&quot;5&quot;:{&quot;last_update&quot;:&quot;2010-12-13
16:16:16&quot;,&quot;status&quot;:&quot;0&quot;},&quot;3&quot;:{&quot;last_update&quot;:&quot;2010-12-13
16:41:48&quot;,&quot;status&quot;:&quot;1&quot;}},&quot;2&quot;:{&quot;6&quot;:{&quot;last_update&quot;:&quot;2010-12-13
16:41:48&quot;,&quot;status&quot;:&quot;1&quot;}}},&quot;server_array&quot;:[{&quot;id&quot;:&quot;1&quot;,&quot;name&quot;:&quot;anes.yyy.net&quot;},{
&quot;id&quot;:&quot;2&quot;,&quot;name&quot;:&quot;neseema.xxx.net&quot;}],&quot;service_array&quot;:[{&quot;id&quot;:&quot;5&quot;,&quot;name&quot;:&quot;POP3&quot;},
{&quot;id&quot;:&quot;6&quot;,&quot;name&quot;:&quot;Cpanel&quot;},{&quot;id&quot;:&quot;3&quot;,&quot;name&quot;:&quot;SMTP&quot;}],&quot;sort_by&quot;:&quot;servername&quot;,
&quot;sort_order&quot;:&quot;ASC&quot;,&quot;pagelinks&quot;:&quot;&quot;,&quot;totrows&quot;:&quot;2&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;limitvalue&quot;:&quot;10&quot;,
&quot;rows_monitor&quot;:2,&quot;current&quot;:&quot;monitor&quot;,&quot;uri&quot;:false}

Friends How to Parse this and take the Results for further
processing in javascript.... I am waiting to hear from you
Soon..

Regards
Anes P.A

<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-10-26 00:48:57 <br />
Have made a fix (NULL to null) and added support for json_last_error(); see commits at http://github.com/kvz/phpjs/commits/master/
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-10-25 14:08:36 <br />
@ Michael White: Just now saw your comment on json_encode &amp; implemented the fixes!

http://github.com/kvz/phpjs/commit/cae72555c08c11ec416f1c8ecfcd5e42509cb46d
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-10-25 13:49:22 <br />
Yeah we need to look into this. Could be much better but I don't have enough time to work it myself right now. Maybe someone else reading this can have a go at it?
Would be much appreciated!
<hr />


<strong>
<a href="http://getsprink.com/" rel="nofollow">Michael White</a>
</strong>
on 2009-10-20 03:01:11 <br />
@kevin Hey - sorry. that's my fault. It should indeed return NULL if there's an error. My main point was that we should use the try/catch to prevent exceptions from causing the JS to just stop unexpectedly.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-10-18 07:18:08 <br />
@Michael: Thanks, but is that really how PHP handles it? the docs for json_decode say &quot;NULL is returned if the json cannot be decoded or if the encoded data is deeper than the recursion limit.&quot; Would be nice if someone could check for all possible json.parse/json.stringify errors (and the rest of the function when these are not available) to check for the type of errors also recorded by json_last_error (and to add a property to the &quot;this.php_js&quot; global so that json_last_error() can retrieve this info). Ditto for json_encode().
<hr />


<strong>
<a href="http://getsprink.com/" rel="nofollow">Michael White</a>
</strong>
on 2009-10-18 02:34:40 <br />
The part that uses native browser JSON objects should be contained in a try/catch block and return the proper value in accordance with how PHP handles bad JSON data.

<pre><code>
try {
    return json.parse(str_json);
}
catch(err) {
    return str_json;
}

</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-06-18 14:17:44 <br />
@ T.J. Leahy + Brett Zamir: Awesome!
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-06-18 06:53:48 <br />
Fixed in SVN. Thanks for the report!

FYI, if you reference a variable like JSON and it doesn&#8217;t exist, it will cause a failure in JS, so we have to either enclose such a reference in a try-catch block (ugly) or reference it as a property of the window object&#8211;since referencing an undefined property does not give an error in JS. 

As far as why I used &quot;this.window&quot; (&quot;window&quot; would be fine for most environments), it is because this will both refer to:

1) the window object in the non-namespaced version (it resolves to &quot;window.window&quot; which, in JS, thankfully for our needs, happens to be a recursive reference to window), and 
2) the window attached to the object itself in the namespaced version (our namespaced version allows for the window to be set to a value other than the global &quot;window&quot; object for environments like JavaScript modules in Firefox extensions where &#8216;window&#8217; is not available as a global but is passed in during object construction, and should automatically set it to the window global otherwise).
<hr />


<strong>
T.J. Leahy
</strong>
on 2009-06-17 06:04:03 <br />
This function should check to see if the browser has native JSON decoding first (IE8, FF 3.5) and use that when available.  Would make it faster and safer then running the input against multiple regular expressions. See http://hacks.mozilla.org/2009/06/security-performance-native-json/

<pre><code>
if (typeof JSON == &quot;object&quot; &amp;&amp; typeof JSON.parse == &quot;function&quot;) {
    return JSON.parse(str_json);
}
</code></pre>
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/json_decode/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/json_decode/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/json_decode/index.html';
        var disqus_url = 'http://phpjs.org/functions/json_decode/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
