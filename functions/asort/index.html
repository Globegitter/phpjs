
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript asort function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript asort function A JavaScript equivalent of PHP&#8217;s asort array/asort.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/asort/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">php</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">.js</a></h1>
  
    <h2>A resource of php functions in JavaScript</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
  <li><a target="_blank" href="https://github.com/kvz/phpjs/wiki/_pages">Wiki</a></li>
  <li><a target="_blank"  href="http://twitter.com/phpjs">@phpjs</a></li>
  <li><a target="_blank"  href="http://identi.ca/brettz9">@brettz9</a></li>
  <li><a target="_blank"  href="http://twitter.com/kvz">@kvz</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript asort function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s asort</p>

<figure class='code'><figcaption><span>array/asort.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/array/asort.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">asort</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">,</span> <span class="nx">sort_flags</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +   input by: paulo kuong</span>
</span><span class='line'>  <span class="c1">// +   improved by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Adam Wallner (http://web2.bitbaro.hu/)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Theriault</span>
</span><span class='line'>  <span class="c1">// %        note 1: SORT_STRING (as well as natsort and natcasesort) might also be</span>
</span><span class='line'>  <span class="c1">// %        note 1: integrated into all of these functions by adapting the code at</span>
</span><span class='line'>  <span class="c1">// %        note 1: http://sourcefrog.net/projects/natsort/natcompare.js</span>
</span><span class='line'>  <span class="c1">// %        note 2: The examples are correct, this is a new way</span>
</span><span class='line'>  <span class="c1">// %        note 2: Credits to: http://javascript.internet.com/math-related/bubble-sort.html</span>
</span><span class='line'>  <span class="c1">// %        note 3: This function deviates from PHP in returning a copy of the array instead</span>
</span><span class='line'>  <span class="c1">// %        note 3: of acting by reference and returning true; this was necessary because</span>
</span><span class='line'>  <span class="c1">// %        note 3: IE does not allow deleting and re-adding of properties without caching</span>
</span><span class='line'>  <span class="c1">// %        note 3: of property position; you can set the ini of &quot;phpjs.strictForIn&quot; to true to</span>
</span><span class='line'>  <span class="c1">// %        note 3: get the PHP behavior, but use this only if you are in an environment</span>
</span><span class='line'>  <span class="c1">// %        note 3: such as Firefox extensions where for-in iteration order is fixed and true</span>
</span><span class='line'>  <span class="c1">// %        note 3: property deletion is supported. Note that we intend to implement the PHP</span>
</span><span class='line'>  <span class="c1">// %        note 3: behavior by default if IE ever does allow it; only gives shallow copy since</span>
</span><span class='line'>  <span class="c1">// %        note 3: is by reference in PHP anyways</span>
</span><span class='line'>  <span class="c1">// %        note 4: Since JS objects&#39; keys are always strings, and (the</span>
</span><span class='line'>  <span class="c1">// %        note 4: default) SORT_REGULAR flag distinguishes by key type,</span>
</span><span class='line'>  <span class="c1">// %        note 4: if the content is a numeric string, we treat the</span>
</span><span class='line'>  <span class="c1">// %        note 4: &quot;original type&quot; as numeric.</span>
</span><span class='line'>  <span class="c1">// -    depends on: strnatcmp</span>
</span><span class='line'>  <span class="c1">// -    depends on: i18n_loc_get_default</span>
</span><span class='line'>  <span class="c1">// *     example 1: data = {d: &#39;lemon&#39;, a: &#39;orange&#39;, b: &#39;banana&#39;, c: &#39;apple&#39;};</span>
</span><span class='line'>  <span class="c1">// *     example 1: data = asort(data);</span>
</span><span class='line'>  <span class="c1">// *     results 1: data == {c: &#39;apple&#39;, b: &#39;banana&#39;, d: &#39;lemon&#39;, a: &#39;orange&#39;}</span>
</span><span class='line'>  <span class="c1">// *     returns 1: true</span>
</span><span class='line'>  <span class="c1">// *     example 2: ini_set(&#39;phpjs.strictForIn&#39;, true);</span>
</span><span class='line'>  <span class="c1">// *     example 2: data = {d: &#39;lemon&#39;, a: &#39;orange&#39;, b: &#39;banana&#39;, c: &#39;apple&#39;};</span>
</span><span class='line'>  <span class="c1">// *     example 2: asort(data);</span>
</span><span class='line'>  <span class="c1">// *     results 2: data == {c: &#39;apple&#39;, b: &#39;banana&#39;, d: &#39;lemon&#39;, a: &#39;orange&#39;}</span>
</span><span class='line'>  <span class="c1">// *     returns 2: true</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">valArr</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">valArrLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">k</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">sorter</span><span class="p">,</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">strictForIn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">populateArr</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">switch</span> <span class="p">(</span><span class="nx">sort_flags</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">case</span> <span class="s1">&#39;SORT_STRING&#39;</span><span class="o">:</span>
</span><span class='line'>    <span class="c1">// compare items as strings</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">that</span><span class="p">.</span><span class="nx">strnatcmp</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="k">case</span> <span class="s1">&#39;SORT_LOCALE_STRING&#39;</span><span class="o">:</span>
</span><span class='line'>    <span class="c1">// compare items as strings, based on the current locale (set with i18n_loc_set_default() as of PHP6)</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">loc</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">i18n_loc_get_default</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">i18nLocales</span><span class="p">[</span><span class="nx">loc</span><span class="p">].</span><span class="nx">sorting</span><span class="p">;</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="k">case</span> <span class="s1">&#39;SORT_NUMERIC&#39;</span><span class="o">:</span>
</span><span class='line'>    <span class="c1">// compare items numerically</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span><span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="k">case</span> <span class="s1">&#39;SORT_REGULAR&#39;</span><span class="o">:</span>
</span><span class='line'>    <span class="c1">// compare items normally (don&#39;t change types)</span>
</span><span class='line'>  <span class="k">default</span><span class="o">:</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">aFloat</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
</span><span class='line'>        <span class="nx">bFloat</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span>
</span><span class='line'>        <span class="nx">aNumeric</span> <span class="o">=</span> <span class="nx">aFloat</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span> <span class="o">===</span> <span class="nx">a</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">bNumeric</span> <span class="o">=</span> <span class="nx">bFloat</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span> <span class="o">===</span> <span class="nx">b</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">aNumeric</span> <span class="o">&amp;&amp;</span> <span class="nx">bNumeric</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">aFloat</span> <span class="o">&gt;</span> <span class="nx">bFloat</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">aFloat</span> <span class="o">&lt;</span> <span class="nx">bFloat</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">aNumeric</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">bNumeric</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">aNumeric</span> <span class="o">&amp;&amp;</span> <span class="nx">bNumeric</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">b</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// BEGIN REDUNDANT</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>  <span class="c1">// END REDUNDANT</span>
</span><span class='line'>  <span class="nx">strictForIn</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">].</span><span class="nx">local_value</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">].</span><span class="nx">local_value</span> <span class="o">!==</span> <span class="s1">&#39;off&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">populateArr</span> <span class="o">=</span> <span class="nx">strictForIn</span> <span class="o">?</span> <span class="nx">inputArr</span> <span class="o">:</span> <span class="nx">populateArr</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Get key and value arrays</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">inputArr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">k</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">valArr</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">k</span><span class="p">,</span> <span class="nx">inputArr</span><span class="p">[</span><span class="nx">k</span><span class="p">]]);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">strictForIn</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">delete</span> <span class="nx">inputArr</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">valArr</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">sorter</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Repopulate the old array</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">valArrLen</span> <span class="o">=</span> <span class="nx">valArr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">valArrLen</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">populateArr</span><span class="p">[</span><span class="nx">valArr</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">valArr</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">strictForIn</span> <span class="o">||</span> <span class="nx">populateArr</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/array/asort.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/array/asort.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="nx">d</span><span class="o">:</span> <span class="s1">&#39;lemon&#39;</span><span class="p">,</span> <span class="nx">a</span><span class="o">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="nx">c</span><span class="o">:</span> <span class="s1">&#39;apple&#39;</span><span class="p">};</span>
</span><span class='line'><span class="nx">data</span> <span class="o">=</span> <span class="nx">asort</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="nx">d</span><span class="o">:</span> <span class="s1">&#39;lemon&#39;</span><span class="p">,</span> <span class="nx">a</span><span class="o">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="nx">c</span><span class="o">:</span> <span class="s1">&#39;apple&#39;</span><span class="p">};</span>
</span><span class='line'><span class="nx">asort</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the array extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/array">array</a></li>
<li><a href="/functions/array_change_key_case">array_change_key_case</a></li>
<li><a href="/functions/array_chunk">array_chunk</a></li>
<li><a href="/functions/array_combine">array_combine</a></li>
<li><a href="/functions/array_count_values">array_count_values</a></li>
<li><a href="/functions/array_diff">array_diff</a></li>
<li><a href="/functions/array_diff_assoc">array_diff_assoc</a></li>
<li><a href="/functions/array_diff_key">array_diff_key</a></li>
<li><a href="/functions/array_diff_uassoc">array_diff_uassoc</a></li>
<li><a href="/functions/array_diff_ukey">array_diff_ukey</a></li>
<li><a href="/functions/array_fill">array_fill</a></li>
<li><a href="/functions/array_fill_keys">array_fill_keys</a></li>
<li><a href="/functions/array_filter">array_filter</a></li>
<li><a href="/functions/array_flip">array_flip</a></li>
<li><a href="/functions/array_intersect">array_intersect</a></li>
<li><a href="/functions/array_intersect_assoc">array_intersect_assoc</a></li>
<li><a href="/functions/array_intersect_key">array_intersect_key</a></li>
<li><a href="/functions/array_intersect_uassoc">array_intersect_uassoc</a></li>
<li><a href="/functions/array_intersect_ukey">array_intersect_ukey</a></li>
<li><a href="/functions/array_key_exists">array_key_exists</a></li>
<li><a href="/functions/array_keys">array_keys</a></li>
<li><a href="/functions/array_map">array_map</a></li>
<li><a href="/functions/array_merge">array_merge</a></li>
<li><a href="/functions/array_merge_recursive">array_merge_recursive</a></li>
<li><a href="/functions/array_multisort">array_multisort</a></li>
<li><a href="/functions/array_pad">array_pad</a></li>
<li><a href="/functions/array_pop">array_pop</a></li>
<li><a href="/functions/array_product">array_product</a></li>
<li><a href="/functions/array_push">array_push</a></li>
<li><a href="/functions/array_rand">array_rand</a></li>
<li><a href="/functions/array_reduce">array_reduce</a></li>
<li><a href="/functions/array_replace">array_replace</a></li>
<li><a href="/functions/array_replace_recursive">array_replace_recursive</a></li>
<li><a href="/functions/array_reverse">array_reverse</a></li>
<li><a href="/functions/array_search">array_search</a></li>
<li><a href="/functions/array_shift">array_shift</a></li>
<li><a href="/functions/array_slice">array_slice</a></li>
<li><a href="/functions/array_splice">array_splice</a></li>
<li><a href="/functions/array_sum">array_sum</a></li>
<li><a href="/functions/array_udiff">array_udiff</a></li>
<li><a href="/functions/array_udiff_assoc">array_udiff_assoc</a></li>
<li><a href="/functions/array_udiff_uassoc">array_udiff_uassoc</a></li>
<li><a href="/functions/array_uintersect">array_uintersect</a></li>
<li><a href="/functions/array_uintersect_assoc">array_uintersect_assoc</a></li>
<li><a href="/functions/array_uintersect_uassoc">array_uintersect_uassoc</a></li>
<li><a href="/functions/array_unique">array_unique</a></li>
<li><a href="/functions/array_unshift">array_unshift</a></li>
<li><a href="/functions/array_values">array_values</a></li>
<li><a href="/functions/array_walk">array_walk</a></li>
<li><a href="/functions/array_walk_recursive">array_walk_recursive</a></li>
<li><a href="/functions/arsort">arsort</a></li>
<li><a href="/functions/asort">asort</a></li>
<li><a href="/functions/compact">compact</a></li>
<li><a href="/functions/count">count</a></li>
<li><a href="/functions/current">current</a></li>
<li><a href="/functions/each">each</a></li>
<li><a href="/functions/end">end</a></li>
<li><a href="/functions/extract">extract</a></li>
<li><a href="/functions/in_array">in_array</a></li>
<li><a href="/functions/key">key</a></li>
<li><a href="/functions/krsort">krsort</a></li>
<li><a href="/functions/ksort">ksort</a></li>
<li><a href="/functions/natcasesort">natcasesort</a></li>
<li><a href="/functions/natsort">natsort</a></li>
<li><a href="/functions/next">next</a></li>
<li><a href="/functions/pos">pos</a></li>
<li><a href="/functions/prev">prev</a></li>
<li><a href="/functions/range">range</a></li>
<li><a href="/functions/reset">reset</a></li>
<li><a href="/functions/rsort">rsort</a></li>
<li><a href="/functions/shuffle">shuffle</a></li>
<li><a href="/functions/sizeof">sizeof</a></li>
<li><a href="/functions/sort">sort</a></li>
<li><a href="/functions/uasort">uasort</a></li>
<li><a href="/functions/uksort">uksort</a></li>
<li><a href="/functions/usort">usort</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="www.conixinc.com" rel="nofollow">Conix Inc</a>
</strong>
on 2012-02-18 21:31:24 <br />
i want to use it
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2011-04-14 13:52:10 <br />
Yes, Tom, thanks. We&#8217;re aware of the issue, and since Chrome might not address this issue, given that the ECMAScript specification indeed does state that the iteration order is in fact implementation dependent (though it&#8217;s worked pretty well to date with a minor exception before Chrome changed the behavior), I&#8217;m doing initial work now (see the array() function) on supporting an associative array representation which is slightly more cumbersome (unfortunately necessarily so). Feel free to help out&#8211;great way to learn some more JavaScript or at least do a little brain puzzles&#8230;.Lots of array functions to port&#8230;

So, to ensure order is predictable cross-browser, you would use something like this:   

<pre><code>
// Returns a PHPJS_Array object--our own class which can
// have all the same PHP methods on it, but using a chainable 
// style, and ensuring sequence is preserved
var arr = array({key1:value1}, {key2:value2});
</code></pre>

Note that this would be treated as an associative array a single level deep (i.e., it would actually be treated like {key1:value1, key2:value2}). 

Or, once I finish updating the array_merge() implementation to work on PHPJS_Array, you could import arrays or objects too, bearing in mind that you&#8217;d have to first perform a sort in order to guarantee order:

<pre><code>
var arr = array().merge({key1:value1, key2:value2}).sort(); // After the sort, we would have a reliable fixed order
</code></pre>

On the bright side, one benefit of moving to this model is that it is forcing us to implement what has been a goal for some time: a jQuery-like chainable object which would allow us to do such as:

<pre><code>
arr.sort().change_key_case('UPPER_CASE').values(); // Notice &quot;array_&quot; is removed from &quot;array_values&quot; since we know the object is an array.
</code></pre>

We should also be able to do the like for strings, etc.:

<pre><code>
string(user_input).str_replace(...).strip_tags().rev(); // I didn't remove &quot;str_&quot; from &quot;str_replace&quot; to avoid conflict with the built-in replace() method.
</code></pre>

Besides this syntax being more &quot;JavaScript-like&quot; and favorable to some JavaScript users, perhaps because it avoids one needing to go backwards to add parentheses around a sequence&#8211;you just keep adding to the right instead&#8211;it also addresses some of the objections to PHP&#8217;s API in not having predictable argument order&#8211;there&#8217;s no need to remember needle-haystack for example, because the haystack argument will be eliminated, as it will be assumed to be the object on which we are calling methods.

Some libraries like Underscore.js already offer some of these abilities, and maybe offer some innovations not present in PHP, but the PHP library is both familiar in naming to PHP users, as well as quite rich, so hopefully this may bring our library into wider favor among regular JavaScript users, as well as continue to provide convenience for PHP users moving to JavaScript (as well as give piece of mind for this implementation order issue). Thanks for bringing this up!
<hr />


<strong>
<a href="www.binde.lv" rel="nofollow">Tom</a>
</strong>
on 2011-04-13 20:53:02 <br />
This is not working on Chrome. Objects are not specified as having to return properties in any particular order.
More info here: http://code.google.com/p/chromium/issues/detail?id=883
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-05-03 21:34:10 <br />
@Adam Wallner: I see now I hadn&#8217;t looked carefully; I see that it was actually messed up for the more common use case. Oh, that is annoying, but glad it is now fixed.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-05-03 21:32:06 <br />
@Adam Wallner: Argh&#8230;Yes, you are right, and that was what I originally meant to do&#8230;Very glad you found that since it affected a good number of functions (though thankfully, fewer people probably using that option&#8211;still&#8230;). Now fixed in Git&#8230; Thank you&#8230;
<hr />


<strong>
<a href="http://web2.bitbaro.hu/" rel="nofollow">Adam Wallner</a>
</strong>
on 2010-05-03 17:57:26 <br />
It doesn&#8217;t work in Firefox 3.6 (I haven&#8217;t tested in other browsers, I need it only in firefox). The problem is in js you don&#8217;t have associative arrays only objects.

Workaround: change the 
<pre><code>
populateArr = []
</code></pre>
to
<pre><code>
populateArr = {}
</code></pre>
in the first line.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-12-07 15:03:30 <br />
@Paulo Kuong: I have now fixed the function (and all others like it except for array_multisort which still needs to be fixed and array_unique which hasn&#8217;t implemented its sorting argument at all yet) to return a (shallow) copy of the array unless the user does &quot;ini_set(&#8216;phpjs.strictForIn&#8217;, true);&quot; in which case it will attempt to work by reference (assumes an exclusively non-IE environment!).
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-11-18 06:13:36 <br />
That echo() was supposed to have a br line break in it but the form stripped the element out (seems the colorer is using strip_tags() instead of htmlentities())&#8230;
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-11-18 06:11:46 <br />
@paulo kuong: Darn, you&#8217;re right!  You can see how the array forms by adding our var_dump (with echo() dependency) after line 82 :

<pre><code>var_dump(inputArr);echo('&lt;br /&gt;');</code></pre>

IE does preserve the right order as it goes through the for loop, but it seems to remember its previous order (since I see no other good explanation why it puts it back in exactly that non-alphabetical/non-reverse-alphabetical order)&#8211;no matter whether I delete (as we do now), set to undefined or some value and then delete, etc.

Nevertheless, everyone from Chrome, Opera, Safari, to Firefox handle this consistently.

Has anyone heard of this issue in IE before and any ways to get around it?
<hr />


<strong>
paulo kuong
</strong>
on 2009-11-17 20:05:04 <br />
Doesn&#8217;t work in IE
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-01-15 11:27:50 <br />
@ Brett Zamir: fixed
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-15 00:55:29 <br />
Glad you liked it, Jason.

That reminds me, I should give some credit for this function (and for arsort() too) to http://javascriptsource.com (specifically http://javascript.internet.com/math-related/bubble-sort.html ). They stated &amp;quot;the script is yours&amp;quot; (and my version is reasonably altered anyways), but they deserve some credit.

Kevin, a small thing, but if you were attending to these kinds of things, I should have put a semicolon after &amp;quot;var bubbleSort &#8230;. {&#8230;}&amp;quot; (or used regular function notation).
<hr />


<strong>
Jason
</strong>
on 2009-01-14 22:50:10 <br />
Great work!  This should be very useful.
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/asort/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/asort/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/asort/index.html';
        var disqus_url = 'http://phpjs.org/functions/asort/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
